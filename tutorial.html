<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <title>Tutorial</title>
</head>
<body >
    <form>
        <div class="container">
            <br><br>
            
            <h3>Tutorial Arep-Patrones Arquitecturales</h3>
            
            <br>
            <p style="margin-left:3%; margin-right:1%;">
                Este es un Tutorial para construir un sitio web dinámico 
                sobre Amazon Web Services: EC2,S3 y RDS. Para esto, <br>
                Se desplegará un sitio estático usando S3,<br>
                Se desplegará un formulario dinámico usando EC2, y<br>
                Se Enlazará el formulario a una base de datos relacional,
                para almacenar y traer los datos almacenados. <br><br>

                El código de la implementación esta disponible Aqui: 
                <a href="https://github.com/Siabell/Arep-patronesArquitecturales/">Repositorio</a> 
            </p>
            <br>
            <h5>Base de datos</h5>
            <br>
            <p style="margin-left:3%; margin-right:3%;">
                1. Crear una instancia en RDS. <br>
                2. Configurar la creacion de la base de datos.<br>
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - Método de creación -> Standard Create <br>
                - Engine Options -> MySql <br>
                - Templates -> Free tier <br>
                - Settings -> nombre de la instancia  <br>
                - Credential Settings -> master username / master password <br>
                - Additional connectivity configuration -> publicly accesible / crear nueva vpc <br>
                - Additional Configuration -> nombre de la base de datos
            </p>
            <p style="margin-left:3%; margin-right:3%;">
                3. Cambiar las reglas de entrada de la vpc para que se pueda
                acceder a la base de datos <br><br>
                <img src="images/vpcdb.PNG" alt="user" style="width:500px;height:300px;"> <br><br>
                4. Probar la conexión con una herramienta de base de datos<br><br>
                <img src="images/probarConexion.PNG" alt="user" style="width:500px;height:400px;"> <br><br>
                5. Crear las tablas e insertar datos<br><br>
                <img src="images/crearTablas.PNG" alt="user" style="width:600px;height:500px;"> <br><br>
                6. Connectarse a la base de datos desde la aplicación
                <br><br>
                <img src="images/connectDB.PNG" alt="user" style="width:600px;height:400px;"> <br><br>

            </p>
            <h5>EC2</h5>
            <br>
            <p style="margin-left:3%; margin-right:3%;">
                1. Crear una instancia de EC2<br>
            </p>    
                <p style="margin-left:5%; margin-right:5%;">
                    - Crear o seleccionar un  par de llaves y descargarlas.
                </p>
                <img src="images/keys.PNG" alt="user" style="width:600px;height:400px;"> <br><br>
                <img src="images/ec2.PNG" alt="user" style="width:600px;height:300px;"> <br><br>
                <p style="margin-left:3%; margin-right:3%;">
                2. Cambiar las reglas de entrada de la vpc para poder 
                acceder desde la EC2 a la base de datos, http y el puerto
                de la aplicación.<br><br>
                <img src="images/rulesEc2.PNG" alt="user" style="width:600px;height:450px;"> <br><br>
                3. Conectarse a la instancia con ssh <br>
                <br>
                <img src="images/ssh.PNG" alt="user" style="width:600px;height:350px;"> <br><br>
                
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - Instalar java 8 con los comandos
            </p>
            <p style="margin-left:7%; margin-right:7%;">
                sudo yum install java-1.8.0<br>
                sudo yum install java-1.8.0-openjdk-devel<br>
                sudo yum remove java-1.7.0-openjdk<br>
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - Instala maven con los comandos
            </p>
            <p style="margin-left:7%; margin-right:7%;">
                sudo wget http://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo<br>
                sudo sed -i s/\$releasever/6/g /etc/yum.repos.d/epel-apache-maven.repo<br>
                sudo yum install -y apache-maven<br>
                mvn --version<br>
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - Cambiar maven con java 8
            </p>
            <p style="margin-left:7%; margin-right:7%;">
                sudo update-alternatives --config java<br>
                sudo update-alternatives --config javac<br>
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - Instalar Git
            </p>
            <p style="margin-left:7%; margin-right:7%;">
                sudo update-alternatives --config java <br>
                sudo update-alternatives --config javac <br>
            </p>
            <p style="margin-left:3%; margin-right:3%;">
                4. Clonar el repositorio de gitHub<br>
            </p>
            <h5>S3</h5>
            <br>
            <p style="margin-left:3%; margin-right:3%;">
                1. Crear un bucket<br><br>
                <img src="images/crearBucket.PNG" alt="user" style="width:500px;height:300px;"> <br><br>
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - permitir acceso público
            </p>
            <p style="margin-left:3%; margin-right:3%;">
                2. Configurar los archivos para que soliciten las peticiones
                a la EC2
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                - En js cambiar a la url pública de la EC2.
                <br><br>
                <img src="images/ConfArch.png" alt="otd" style="width:700px;height:400px;"> <br><br>
            </p>
            <p style="margin-left:3%; margin-right:3%;">
                3.Subir los archivos al bucket<br><br>
                <img src="images/subirArch.PNG" alt="otd" style="width:600px;height:400px;"> <br><br>
                4.Configurar los cors para permitir acceder a la s3<br>
            </p>
            <p style="margin-left:5%; margin-right:5%;">
                &lt;CORSConfiguration&gt;<br>
            </p>
                <p style="margin-left:7%; margin-right:7%;">
                    &lt;CORSRule&gt;<br>
                </p>
                <p style="margin-left:9%; margin-right:9%;">
                    &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;<br>
                    &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;<br>
                    &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt;<br>
                    &lt;AllowedMethod&gt;POST&lt;/AllowedMethod&gt;<br>
                    &lt;AllowedMethod&gt;DELETE&lt;/AllowedMethod&gt;<br>
                    &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;<br>
                </p>
            <p style="margin-left:7%; margin-right:7%;">
                &lt;/CORSRule&gt;<br>
            </p>
            <p style="margin-left:5%; margin-right:5%;"> 
                &lt;/CORSConfiguration&gt;<br>
            </p>
            <br>
                <img src="images/corsConf.PNG" alt="otd" style="width:700px;height:400px;"> <br><br>
            <p style="margin-left:3%; margin-right:3%;">
                5.En properties/static website hosting
                referenciar el documento index.html<br><br>
                <img src="images/webHost.PNG" alt="otd" style="width:350px;height:400px;"> <br><br>
                6. Correr el programa en ec2<br>
                7. Verificar su funcionalidad.<br><br>
                <img src="images/funcionalidad.PNG" alt="otd" style="width:700px;height:400px;"> <br><br>
            </p>
            <br>
            
        </div>
    </form>
</body>
</html>